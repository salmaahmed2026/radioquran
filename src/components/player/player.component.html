<div class="bg-gray-900/50 backdrop-blur-2xl rounded-2xl shadow-2xl p-6 sm:p-8 border border-blue-500/30 text-center">
  
  <audio #audioPlayer [src]="audioSrc" preload="auto" crossorigin="anonymous"></audio>

  <img src="https://i.imgur.com/L4uA9qL.png" alt="إذاعة القرآن الكريم" class="w-40 sm:w-48 mx-auto mb-4">

  <h1 class="text-2xl sm:text-3xl font-bold text-white mb-2 tracking-wide leading-tight">
    بث مباشر إذاعة القرآن الكريم من القاهرة
  </h1>
  <p class="text-blue-200/80 mb-1 text-lg">
    Radio Quran
  </p>
  <p class="text-blue-300 mb-6 text-md">
    جودة عالية MP3 بدون تقطيع
  </p>

  @if(audioError()) {
    <div class="bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-4" role="alert">
      <strong class="font-bold">خطأ في البث!</strong>
      <span class="block sm:inline">تعذر تشغيل الراديو. يرجى المحاولة مرة أخرى لاحقاً.</span>
    </div>
  }

  <div class="h-16 flex justify-center items-end my-4 space-x-1">
    @for (height of barHeights(); track $index) {
      <div 
        class="w-1.5 bg-gradient-to-b from-blue-400 to-blue-600 rounded-full visualizer-bar"
        [style.height]="height + '%'">
      </div>
    }
  </div>

  <div class="flex items-center justify-center space-x-6 mt-6">
    <div class="flex items-center justify-start w-32">
      <div class="group flex items-center">
        <button (click)="toggleMute()" class="text-gray-400 hover:text-blue-300 transition-colors duration-200 text-xl w-8 h-8 flex items-center justify-center">
          <i [class]="volumeIconClass()"></i>
        </button>
        <div class="w-0 group-hover:w-[90px] overflow-hidden transition-all duration-300 ease-in-out">
            <input 
                type="range" 
                min="0" 
                max="1" 
                step="0.01" 
                [value]="volume()"
                (input)="onVolumeChange($event)"
                class="w-[90px] h-1.5 ml-2 bg-gray-700 rounded-lg appearance-none cursor-pointer range-sm accent-blue-500"
                [disabled]="isMuted()">
        </div>
      </div>
    </div>

    <button (click)="togglePlayPause()" class="bg-blue-500 text-gray-900 w-16 h-16 rounded-full flex items-center justify-center text-3xl shadow-lg hover:bg-blue-600 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-400/50 transform hover:scale-110">
      @if (isPlaying()) {
        <i class="fa-solid fa-pause"></i>
      } @else {
        <i class="fa-solid fa-play"></i>
      }
    </button>
    
    <div class="w-32">
        <!-- Placeholder for symmetry -->
    </div>
  </div>

  <div class="mt-8 border-t border-blue-500/20 pt-6">
    <p class="text-gray-300 text-sm text-center leading-relaxed mb-6">استمع إلى بث مباشر لإذاعة القرآن الكريم من القاهرة على مدار 24 ساعة. تلاوات خاشعة، برامج دينية، وتفسير للقرآن الكريم بجودة عالية وبدون انقطاع. انضم إلى ملايين المستمعين حول العالم في رحلة روحانية مع كلام الله.</p>
    
    <div class="text-center">
      <p class="text-blue-200/90 mb-4 text-md font-medium">شارك الأجر</p>
      <div class="flex items-center justify-center space-x-4">
        <a [href]="facebookShareUrl" target="_blank" rel="noopener noreferrer" aria-label="Share on Facebook" class="w-10 h-10 flex items-center justify-center bg-gray-700/50 hover:bg-blue-500 rounded-full text-lg text-gray-300 hover:text-white transition-all duration-200">
          <i class="fa-brands fa-facebook-f"></i>
        </a>
        <a [href]="twitterShareUrl" target="_blank" rel="noopener noreferrer" aria-label="Share on X" class="w-10 h-10 flex items-center justify-center bg-gray-700/50 hover:bg-blue-500 rounded-full text-lg text-gray-300 hover:text-white transition-all duration-200">
          <i class="fa-brands fa-x-twitter"></i>
        </a>
        <a [href]="whatsappShareUrl" target="_blank" rel="noopener noreferrer" aria-label="Share on WhatsApp" class="w-10 h-10 flex items-center justify-center bg-gray-700/50 hover:bg-blue-500 rounded-full text-lg text-gray-300 hover:text-white transition-all duration-200">
          <i class="fa-brands fa-whatsapp"></i>
        </a>
        <button (click)="copyLink()" aria-label="Copy link" class="w-10 h-10 flex items-center justify-center bg-gray-700/50 hover:bg-blue-500 rounded-full text-lg text-gray-300 hover:text-white transition-all duration-200">
          <i class="fa-solid fa-link"></i>
        </button>
      </div>
      <div class="h-5 mt-3"> <!-- Placeholder for confirmation text -->
        @if(linkCopied()) {
          <p class="text-green-400 text-sm transition-opacity duration-300 opacity-100">تم نسخ الرابط بنجاح!</p>
        }
      </div>
    </div>
  </div>

</div>